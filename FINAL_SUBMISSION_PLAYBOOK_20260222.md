# Final Submission Playbook (2026-02-22)

## 1) 현재 스냅샷 (확정 수치)
- 기준 시각: `2026-02-22 08:35 KST`
- 팀: `jay`
- 현재 최고 기록:
  - `score=81.3`
  - `f1=0.9389`
  - `on_device_pct=100.0`
  - `avg_time_ms=6911.7`
  - `timestamp=2026-02-21T23:28:24Z` (KST `2026-02-22 08:28:24`)
- 순위:
  - `92 / 384` (상위 `23.96%`)

## 2) 리더보드 패턴 요약
- `81.3`보다 높은 팀(91개)을 확인했을 때, 전부 `on_device_pct=100.0`.
- 현재 상위권에서는 cloud fallback 비율보다 **F1 + on-device 유지**가 더 지배적인 패턴.
- 즉, 마지막 제출 전략의 핵심은:
  - cloud 시도 자체가 아니라
  - on-device 100%를 깨지 않으면서 F1을 올리거나 유지하는 것.

## 3) 현실적인 목표선
- Top 90 진입 컷 근처: `~81.98`
- Top 75 진입 컷 근처: `~83.0`
- Top 50 진입 컷 근처: `~85.0`

## 4) 마지막 제출 원칙
1. **대규모 리팩터링 금지**:
   - 멀티툴 라우팅 전체 교체, fallback 전면 확장, 프롬프트 대수정 금지.
2. **on-device 100% 보존 우선**:
   - cloud 분기 추가는 최소 시그니처에 한정.
3. **한 번에 한 가지 변화만**:
   - 원인 추적 가능한 변경만 허용.
4. **점수 보존 관점**:
   - README 기준 best score 보존이므로, 실험 시에도 롤백 기준을 명확히 유지.

## 5) 추천 실행안 (우선순위)

### A안 (가장 안전)
- 현재 `main.py` 그대로 최종 제출.
- 장점:
  - 이미 `81.3` 달성.
  - 실패 모드가 예측 가능.
- 리스크:
  - 추가 상승 여지가 제한적.

### B안 (중간 리스크)
- 현재 `main.py`에서 **특정 low-F1 시그니처 1개만** 미세 보정 후 제출.
- 장점:
  - +0.5~1.5p 가능성.
- 리스크:
  - 부작용 발생 시 F1 하락 가능.

### C안 (비추천, 고리스크)
- cloud fallback 범위 확대/threshold 대폭 조정.
- 이유:
  - hidden에서 기대대로 동작하지 않을 가능성이 여전히 큼.
  - 마지막 제출로는 분산이 너무 큼.

## 6) 제출 전 체크리스트
1. `python3 -m py_compile main.py`
2. 제출 대상 파일이 정말 `main.py`인지 확인
3. 제출 명령:
   - `python3 submit.py --team "jay" --location "Online"`
4. 반환된 `submission_id` 즉시 기록
5. 상태 확인:
   - `/eval/status?id=<submission_id>`

## 7) Go / No-Go 규칙
- Go:
  - 기존보다 코드 변경량이 작고, 영향 범위가 명확할 때
  - 최소 1개 케이스 개선 논리가 분명할 때
- No-Go:
  - 변경이 여러 축(라우팅+파싱+프롬프트)을 동시에 건드릴 때
  - 왜 좋아지는지 설명이 불가능할 때

## 8) 최종 권고
- 현재 시점에서 가장 합리적인 선택은 **A안(현재 버전 유지)** 또는 **B안(미세 변경 1개만)**.
- “cloud를 반드시 써야 한다”는 가정보다, 현재 리더보드 패턴 기준으로는
  - `on-device 100% 유지 + F1 방어/상향`
  가 최종 점수 안정성이 높다.
