# Scoring Scenario Analysis

## 채점 공식

```
level_score = 0.60 * F1 + 0.15 * time_score + 0.25 * on_device_ratio
time_score  = max(0, 1 - avg_time / 500ms)
total_score = 0.20 * easy + 0.30 * medium + 0.50 * hard
```

참고 레이턴시: on-device ~300ms, cloud ~1000ms

## 손익분기점

cloud → on-device 전환 1건당 (10개 그룹 기준):

| 결과 | F1 변동 | on-device 변동 | 순효과 |
|------|---------|---------------|--------|
| 성공 | 0 | +0.025 | **+0.025** |
| 실패 | -0.060 | +0.025 | **-0.035** |

**손익분기 성공률: 71%** — 전환하려는 케이스의 on-device 성공률이 이 이상이어야 이득.

## 시나리오 비교

### 현재 상태 (v2.1 baseline)

| Difficulty | F1 | On-device | Avg Time | Time Score | Level Score |
|------------|------|-----------|----------|------------|-------------|
| easy | 0.96 | 3/10 (30%) | 790ms | 0.00 | 0.651 |
| medium | 0.96 | 3/10 (30%) | 790ms | 0.00 | 0.651 |
| hard | 0.96 | 0/10 (0%) | 1000ms | 0.00 | 0.576 |
| **Total** | | | | | **61.3%** |

### 시나리오 A: medium on-device 강화 (3→7), F1 하락

Gate 7 완화하여 multi-tool 케이스 4건 추가 전환. 이 중 2건 성공, 2건 실패 가정.

| Difficulty | F1 | On-device | Avg Time | Time Score | Level Score |
|------------|------|-----------|----------|------------|-------------|
| easy | 0.96 | 3/10 (30%) | 790ms | 0.00 | 0.651 |
| medium | 0.80 | 7/10 (70%) | 510ms | 0.00 | 0.655 |
| hard | 0.96 | 0/10 (0%) | 1000ms | 0.00 | 0.576 |
| **Total** | | | | | **61.5% (+0.2)** |

평가: F1 하락(-0.16)과 on-device 이득(+0.4)이 상쇄. 거의 제자리.

### 시나리오 B: medium on-device, 대부분 실패

추가 4건 중 1건만 성공, 3건 실패.

| Difficulty | F1 | On-device | Avg Time | Time Score | Level Score |
|------------|------|-----------|----------|------------|-------------|
| easy | 0.96 | 3/10 (30%) | 790ms | 0.00 | 0.651 |
| medium | 0.70 | 7/10 (70%) | 510ms | 0.00 | 0.595 |
| hard | 0.96 | 0/10 (0%) | 1000ms | 0.00 | 0.576 |
| **Total** | | | | | **59.7% (-1.6)** |

평가: 역효과. multi-tool on-device 성공률이 낮으면 점수 하락.

### 시나리오 C: easy on-device 극대화 (3→8)

1-tool easy 케이스를 on-device로 전환. 추가 5건 중 4건 성공, 1건 실패 가정.

| Difficulty | F1 | On-device | Avg Time | Time Score | Level Score |
|------------|------|-----------|----------|------------|-------------|
| easy | 0.92 | 8/10 (80%) | 440ms | 0.12 | 0.770 |
| medium | 0.96 | 3/10 (30%) | 790ms | 0.00 | 0.651 |
| hard | 0.96 | 0/10 (0%) | 1000ms | 0.00 | 0.576 |
| **Total** | | | | | **63.7% (+2.4)** |

평가: 가장 효율적. time_score 보너스(0.12)가 추가로 발생. easy는 weight 20%지만 level_score 상승폭이 큼.

### 시나리오 D: easy 극대화 + medium 소폭 (추천)

easy 8/10 + medium 5/10 on-device. medium 추가 2건 중 1건 실패 가정.

| Difficulty | F1 | On-device | Avg Time | Time Score | Level Score |
|------------|------|-----------|----------|------------|-------------|
| easy | 0.92 | 8/10 (80%) | 440ms | 0.12 | 0.770 |
| medium | 0.90 | 5/10 (50%) | 650ms | 0.00 | 0.665 |
| hard | 0.96 | 0/10 (0%) | 1000ms | 0.00 | 0.576 |
| **Total** | | | | | **64.1% (+2.8)** |

평가: 현실적 최적 조합. easy에서 time 보너스 확보, medium에서 소폭 이득.

### 시나리오 E: hard on-device 시도

multi-action 5건을 on-device로 전환. 대부분 실패하여 F1 급락.

| Difficulty | F1 | On-device | Avg Time | Time Score | Level Score |
|------------|------|-----------|----------|------------|-------------|
| easy | 0.96 | 3/10 (30%) | 790ms | 0.00 | 0.651 |
| medium | 0.96 | 3/10 (30%) | 790ms | 0.00 | 0.651 |
| hard | 0.60 | 5/10 (50%) | 650ms | 0.00 | 0.485 |
| **Total** | | | | | **56.8% (-4.5)** |

평가: hard weight가 50%이므로 F1 하락 영향이 극대화. 절대 하면 안 됨.

### 시나리오 F: 이상적 (F1 유지 + on-device 극대화)

모든 전환 케이스에서 F1을 유지한다는 비현실적 가정.

| Difficulty | F1 | On-device | Avg Time | Time Score | Level Score |
|------------|------|-----------|----------|------------|-------------|
| easy | 0.96 | 8/10 (80%) | 440ms | 0.12 | 0.794 |
| medium | 0.96 | 7/10 (70%) | 510ms | 0.00 | 0.751 |
| hard | 0.96 | 0/10 (0%) | 1000ms | 0.00 | 0.576 |
| **Total** | | | | | **67.2% (+5.9)** |

평가: 이론적 상한. on-device 정확도가 cloud와 동등하다면 가능.

## 전략 우선순위

1. **easy on-device 극대화** — 1-tool 케이스는 on-device 성공률이 높고, time_score 보너스까지 발생. 가성비 최고.
2. **medium 보수적 확대** — 성공 확신 있는 케이스만 선별적으로 전환.
3. **hard는 cloud 유지** — multi-action on-device는 성공률이 극히 낮아 순손실.

## time_score 임계점

on-device 비율이 일정 수준을 넘어야 avg_time < 500ms가 되어 time_score가 켜짐:

| On-device 비율 | Avg Time | Time Score | 비고 |
|---------------|----------|------------|------|
| 0/10 (0%) | 1000ms | 0.00 | |
| 3/10 (30%) | 790ms | 0.00 | 현재 상태 |
| 5/10 (50%) | 650ms | 0.00 | |
| 7/10 (70%) | 510ms | 0.00 | 아직 500ms 초과 |
| 8/10 (80%) | 440ms | **0.12** | 보너스 발생 |
| 10/10 (100%) | 300ms | **0.40** | 최대 |

**8/10 이상부터 time_score 보너스가 발생** — easy에서만 현실적으로 달성 가능.
